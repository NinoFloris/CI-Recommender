$(document).ready(function() {
    $('.paper-searchbar--submit').on('click', function() {
        var form = $('.paper-searchbar');
        var query = $('.paper-searchbar--input').val();

        $.ajax({
            type: "post",
            url: 'http://' + window.location.host + '/' + form.attr('action'),
            contentType: 'application/json',
            data: '{ "query" : "' + query +'" }',
            dataType: "json",
        }).done(function (data) {
            alert(data.query);
        }).fail(function (x, e) {
           switch (x.status) {
                case 0:
                    if (e != 'timeout') {
                       alert('You are offline! Please check your network.');
                    }
                    break;
                case 404:
                    alert('Requested URL not found.');
                    break;
                case 500:
                    alert('Internal Server Error, something has gone terribly wrong.');
                    break;
            }

            if (e == 'parsererror') {
                alert('Parsing JSON request failed.');
            } else if (e == 'timeout') {
                alert('Request timed out.</br> Connection seems bad or server is busy, try again in a few seconds.');
            } else {
                alert('Unknown error: ' + x.responseText);
            }
        });

        return false;
    });
});